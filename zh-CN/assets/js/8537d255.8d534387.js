"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([[93760],{15680:(e,n,a)=>{a.d(n,{xA:()=>d,yg:()=>g});var t=a(296540);function l(e,n,a){return n in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}function r(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,t)}return a}function i(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?r(Object(a),!0).forEach((function(n){l(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}function c(e,n){if(null==e)return{};var a,t,l=function(e,n){if(null==e)return{};var a,t,l={},r=Object.keys(e);for(t=0;t<r.length;t++)a=r[t],n.indexOf(a)>=0||(l[a]=e[a]);return l}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(t=0;t<r.length;t++)a=r[t],n.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(l[a]=e[a])}return l}var o=t.createContext({}),s=function(e){var n=t.useContext(o),a=n;return e&&(a="function"==typeof e?e(n):i(i({},n),e)),a},d=function(e){var n=s(e.components);return t.createElement(o.Provider,{value:n},e.children)},u="mdxType",p={inlineCode:"code",wrapper:function(e){var n=e.children;return t.createElement(t.Fragment,{},n)}},_=t.forwardRef((function(e,n){var a=e.components,l=e.mdxType,r=e.originalType,o=e.parentName,d=c(e,["components","mdxType","originalType","parentName"]),u=s(a),_=l,g=u["".concat(o,".").concat(_)]||u[_]||p[_]||r;return a?t.createElement(g,i(i({ref:n},d),{},{components:a})):t.createElement(g,i({ref:n},d))}));function g(e,n){var a=arguments,l=n&&n.mdxType;if("string"==typeof e||l){var r=a.length,i=new Array(r);i[0]=_;var c={};for(var o in n)hasOwnProperty.call(n,o)&&(c[o]=n[o]);c.originalType=e,c[u]="string"==typeof e?e:l,i[1]=c;for(var s=2;s<r;s++)i[s]=a[s];return t.createElement.apply(null,i)}return t.createElement.apply(null,a)}_.displayName="MDXCreateElement"},135951:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>o,contentTitle:()=>i,default:()=>p,frontMatter:()=>r,metadata:()=>c,toc:()=>s});var t=a(58168),l=(a(296540),a(15680));const r={title:"\u5b58\u7b97\u5206\u79bb Doris \u90e8\u7f72",language:"zh-CN"},i=void 0,c={unversionedId:"separation-of-storage-and-compute/deployment",id:"separation-of-storage-and-compute/deployment",title:"\u5b58\u7b97\u5206\u79bb Doris \u90e8\u7f72",description:"\x3c!--",source:"@site/i18n/zh-CN/docusaurus-plugin-content-docs/current/separation-of-storage-and-compute/deployment.md",sourceDirName:"separation-of-storage-and-compute",slug:"/separation-of-storage-and-compute/deployment",permalink:"/zh-CN/docs/dev/separation-of-storage-and-compute/deployment",draft:!1,tags:[],version:"current",frontMatter:{title:"\u5b58\u7b97\u5206\u79bb Doris \u90e8\u7f72",language:"zh-CN"},sidebar:"docs",previous:{title:"\u5b58\u7b97\u5206\u79bb\u6982\u89c8",permalink:"/zh-CN/docs/dev/separation-of-storage-and-compute/overview"},next:{title:"\u5b58\u7b97\u5206\u79bb\u8ba1\u7b97\u96c6\u7fa4",permalink:"/zh-CN/docs/dev/separation-of-storage-and-compute/compute-cluster"}},o={},s=[{value:"\u5199\u5728\u524d\u9762",id:"\u5199\u5728\u524d\u9762",level:2},{value:"\u7f16\u8bd1",id:"\u7f16\u8bd1",level:2},{value:"\u7248\u672c\u4fe1\u606f",id:"\u7248\u672c\u4fe1\u606f",level:2},{value:"Meta-service \u4ee5\u53ca Recycler \u90e8\u7f72",id:"meta-service-\u4ee5\u53ca-recycler-\u90e8\u7f72",level:2},{value:"meta-service \u914d\u7f6e",id:"meta-service-\u914d\u7f6e",level:3},{value:"Recycler \u914d\u7f6e",id:"recycler-\u914d\u7f6e",level:3},{value:"\u6a21\u5757\u542f\u505c",id:"\u6a21\u5757\u542f\u505c",level:3},{value:"\u542f\u505c meta_service",id:"\u542f\u505c-meta_service",level:3},{value:"\u542f\u505c Recycler",id:"\u542f\u505c-recycler",level:3},{value:"\u521b\u5efa\u5b58\u7b97\u5206\u79bb\u96c6\u7fa4",id:"\u521b\u5efa\u5b58\u7b97\u5206\u79bb\u96c6\u7fa4",level:2},{value:"\u521b\u5efa\u5b58\u7b97\u5206\u79bb\u96c6\u7fa4FE",id:"\u521b\u5efa\u5b58\u7b97\u5206\u79bb\u96c6\u7fa4fe",level:3},{value:"\u5b58\u7b97\u5206\u79bb\u96c6\u7fa4\u53ca\u5176\u5b58\u50a8\u540e\u7aef",id:"\u5b58\u7b97\u5206\u79bb\u96c6\u7fa4\u53ca\u5176\u5b58\u50a8\u540e\u7aef",level:4},{value:"\u521b\u5efa\u57fa\u4e8eHDFS\u7684\u5b58\u7b97\u5206\u79bbDoris",id:"\u521b\u5efa\u57fa\u4e8ehdfs\u7684\u5b58\u7b97\u5206\u79bbdoris",level:5},{value:"\u521b\u5efa\u57fa\u4e8eS3\u7684\u5b58\u7b97\u5206\u79bbDoris",id:"\u521b\u5efa\u57fa\u4e8es3\u7684\u5b58\u7b97\u5206\u79bbdoris",level:5},{value:"\u67e5\u770b\u5b58\u50a8\u540e\u7aef",id:"\u67e5\u770b\u5b58\u50a8\u540e\u7aef",level:5},{value:"\u6dfb\u52a0FE",id:"\u6dfb\u52a0fe",level:4},{value:"\u521b\u5efa\u8ba1\u7b97\u96c6\u7fa4(Compute Cluster -- BE)",id:"\u521b\u5efa\u8ba1\u7b97\u96c6\u7fa4compute-cluster----be",level:3},{value:"FE/BE\u914d\u7f6e",id:"febe\u914d\u7f6e",level:3},{value:"fe.conf",id:"feconf",level:4},{value:"be.conf",id:"beconf",level:4},{value:"\u542f\u505cFE/BE",id:"\u542f\u505cfebe",level:3},{value:"\u8ba1\u7b97\u96c6\u7fa4\u64cd\u4f5c",id:"\u8ba1\u7b97\u96c6\u7fa4\u64cd\u4f5c",level:3},{value:"\u52a0\u51cfFE/BE\u8282\u70b9",id:"\u52a0\u51cffebe\u8282\u70b9",level:4},{value:"\u52a0\u51cf\u8ba1\u7b97\u96c6\u7fa4(Compute Cluster)",id:"\u52a0\u51cf\u8ba1\u7b97\u96c6\u7fa4compute-cluster",level:4},{value:"\u6e05\u7406\u96c6\u7fa4(<strong>\u6b63\u5f0f\u73af\u5883\u8bf7\u52ff\u4f7f\u7528</strong>)",id:"\u6e05\u7406\u96c6\u7fa4\u6b63\u5f0f\u73af\u5883\u8bf7\u52ff\u4f7f\u7528",level:2},{value:"\u5e38\u89c1\u95ee\u9898",id:"\u5e38\u89c1\u95ee\u9898",level:2}],d={toc:s},u="wrapper";function p(e){let{components:n,...a}=e;return(0,l.yg)(u,(0,t.A)({},d,a,{components:n,mdxType:"MDXLayout"}),(0,l.yg)("h2",{id:"\u5199\u5728\u524d\u9762"},"\u5199\u5728\u524d\u9762"),(0,l.yg)("p",null,"\u5f00\u59cb\u90e8\u7f72\u524d\u8bf7\u5148\u9605\u8bfb",(0,l.yg)("a",{parentName:"p",href:"/zh-CN/docs/dev/separation-of-storage-and-compute/overview"},"Doris \u5b58\u7b97\u5206\u79bb\u67b6\u6784\u8bf4\u660e\u6587\u6863"),"."),(0,l.yg)("p",null,"\u5b58\u7b97\u5206\u79bbDoris\u90e8\u7f72\u603b\u5171\u9700\u8981 3 \u4e2a\u6a21\u5757\uff1aFE BE MS(\u7a0b\u5e8f\u540d\u4e3a doris_cloud, \u5b58\u7b97\u5206\u79bb\u6a21\u5f0f\u65b0\u589e\u6a21\u5757)"),(0,l.yg)("p",null,"\u5b58\u7b97\u5206\u79bbDoris\u4f9d\u8d56\u4e24\u4e2a\u989d\u5916\u7684\u5f00\u6e90\u9879\u76ee, \u5f00\u59cb\u90e8\u7f72\u524d\u8bf7\u5c06\u8fd9\u4e24\u4e2a\u4f9d\u8d56\u63d0\u524d\u5b89\u88c5\u597d"),(0,l.yg)("ol",null,(0,l.yg)("li",{parentName:"ol"},"foundationdb (fdb), \u5b89\u88c5\u6587\u6863\u53c2\u8003",(0,l.yg)("a",{parentName:"li",href:"/zh-CN/docs/dev/separation-of-storage-and-compute/install-fdb"},"FDB \u5b89\u88c5\u6587\u6863")),(0,l.yg)("li",{parentName:"ol"},"openjdk17, \u9700\u8981\u5b89\u88c5\u5230\u6240\u6709\u7684\u8282\u70b9\u4e0a, \u4ece\u8fd9\u91cc\u83b7\u53d6\u5b89\u88c5 ",(0,l.yg)("a",{parentName:"li",href:"https://download.java.net/java/GA/jdk17.0.1/2a2082e5a09d4267845be086888add4f/12/GPL/openjdk-17.0.1_linux-x64_bin.tar.gz"},"https://download.java.net/java/GA/jdk17.0.1/2a2082e5a09d4267845be086888add4f/12/GPL/openjdk-17.0.1_linux-x64_bin.tar.gz"))),(0,l.yg)("p",null,"ms \u6a21\u5757\u7a0b\u5e8f\u542f\u52a8\u6709\u4e24\u4e2a\u89d2\u8272\uff0c\u901a\u8fc7\u542f\u52a8\u53c2\u6570\u786e\u5b9a\u5b83\u7684\u89d2\u8272\uff1a"),(0,l.yg)("ol",null,(0,l.yg)("li",{parentName:"ol"},"Meta-service \u5143\u6570\u636e\u7ba1\u7406"),(0,l.yg)("li",{parentName:"ol"},"Recycler \u6570\u636e\u56de\u6536")),(0,l.yg)("h2",{id:"\u7f16\u8bd1"},"\u7f16\u8bd1"),(0,l.yg)("p",null,(0,l.yg)("inlineCode",{parentName:"p"},"--cloud")," \u662f\u7f16\u8bd1\u5b58\u7b97\u5206\u79bbms\u6a21\u5757\u7684\u53c2\u6570"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-bash"},"sh build.sh --fe --be --cloud \n")),(0,l.yg)("p",null,"\u76f8\u6bd4\u5b58\u7b97\u4e00\u4f53 ",(0,l.yg)("inlineCode",{parentName:"p"},"output")," \u76ee\u5f55\u4e0b\u591a\u4e86\u4e00\u4e2a ",(0,l.yg)("inlineCode",{parentName:"p"},"ms")," \u76ee\u5f55\u4ea7\u51fa."),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-bash"},"output\n\u251c\u2500\u2500 be\n\u251c\u2500\u2500 fe\n\u2514\u2500\u2500 ms\n    \u251c\u2500\u2500 bin\n    \u251c\u2500\u2500 conf\n    \u2514\u2500\u2500 lib\n")),(0,l.yg)("p",null,"ms \u8fd9\u4e2a\u4ea7\u51fa\u76ee\u5f55\u4f1a\u63d0\u4f9b\u7ed9meta-service \u4ee5\u53ca recycler \u4f7f\u7528,\n\u9700\u8981\u6ce8\u610f\u7684\u662f\u867d\u7136 Recycler \u548c Meta-service \u662f\u540c\u4e2a\u7a0b\u5e8f\uff0c\u4f46\u662f\u76ee\u524d\u9700\u8981\u62f7\u8d1d\u4e24\u4efd\u4e8c\u8fdb\u5236\u6587\u4ef6\u3002\nRecycler \u548c Meta-service \u4e24\u4e2a\u76ee\u5f55\u5b8c\u5168\u4e00\u6837\uff0c\u53ea\u662f\u542f\u52a8\u53c2\u6570\u4e0d\u540c\u3002"),(0,l.yg)("p",null,"\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u62f7\u8d1dms\u5f97\u5230\u4e00\u4e2aRecycler\u5de5\u4f5c\u76ee\u5f55",(0,l.yg)("inlineCode",{parentName:"p"},"re"),", \u7136\u540e\u6309\u9700\u66f4\u6539ms \u4ee5\u53ca re\u76ee\u5f55\u4e0bconf\n\u91cc\u7684\u7aef\u53e3\u7b49\u914d\u7f6e\u5373\u53ef."),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-shell"},"cp -r ms re\n")),(0,l.yg)("h2",{id:"\u7248\u672c\u4fe1\u606f"},"\u7248\u672c\u4fe1\u606f"),(0,l.yg)("p",null,"doris_cloud \u68c0\u67e5\u7248\u672c\u6709\u4e24\u4e2a\u65b9\u5f0f \u4e00\u4e2a\u662f ",(0,l.yg)("inlineCode",{parentName:"p"},"bin/start.sh --version")),(0,l.yg)("p",null,"\u4e00\u4e2a\u662f ",(0,l.yg)("inlineCode",{parentName:"p"},"lib/doris_cloud --version"),", (\u5982\u679c\u5176\u4e2d\u4e00\u4e2a\u65b9\u6cd5\u62a5\u9519\uff0c\u4f7f\u7528\u53e6\u5916\u4e00\u4e2a\u5373\u53ef)"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-bash"},'$ lib/doris_cloud --version\nversion:{doris_cloud-0.0.0-debug} code_version:{commit=b9c1d057f07dd874ad32501ff43701247179adcb time=2024-03-24 20:44:50 +0800} build_info:{initiator=gavinchou@VM-10-7-centos build_at=2024-03-24 20:44:50 +0800 build_on=NAME="TencentOS Server" VERSION="3.1 (Final)" }\n')),(0,l.yg)("h2",{id:"meta-service-\u4ee5\u53ca-recycler-\u90e8\u7f72"},"Meta-service \u4ee5\u53ca Recycler \u90e8\u7f72"),(0,l.yg)("p",null,"Recycler \u548c Meta-service \u662f\u540c\u4e2a\u7a0b\u5e8f\u7684\u4e0d\u540c\u8fdb\u7a0b\uff0c\u901a\u8fc7\u542f\u52a8\u53c2\u6570\u6765\u786e\u5b9a\u8fd0\u884c\u7684 Recycler \u6216\u8005\u662f Meta-service."),(0,l.yg)("p",null,"\u8fd9\u4e24\u4e2a\u8fdb\u7a0b\u4f9d\u8d56 FDB, FDB \u7684\u90e8\u7f72\u8bf7\u53c2\u8003",(0,l.yg)("a",{parentName:"p",href:"/zh-CN/docs/dev/separation-of-storage-and-compute/install-fdb"},"FDB \u5b89\u88c5\u6587\u6863")),(0,l.yg)("h3",{id:"meta-service-\u914d\u7f6e"},"meta-service \u914d\u7f6e"),(0,l.yg)("p",null,(0,l.yg)("inlineCode",{parentName:"p"},"./conf")," \u76ee\u5f55\u4e0b\u6709\u4e00\u4e2a\u5168\u90e8\u91c7\u7528\u9ed8\u8ba4\u53c2\u6570\u7684\u914d\u7f6e\u6587\u4ef6 doris_cloud.conf (\u53ea\u9700\u8981\u4e00\u4e2a\u914d\u7f6e\u6587\u4ef6)"),(0,l.yg)("p",null,"\u4e00\u822c\u9700\u8981\u6539\u7684\u662f ",(0,l.yg)("inlineCode",{parentName:"p"},"brpc_listen_port")," \u548c ",(0,l.yg)("inlineCode",{parentName:"p"},"fdb_cluster")," \u8fd9\u4e24\u4e2a\u53c2\u6570"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-shell"},"brpc_listen_port = 5000\nfdb_cluster = xxx:yyy@127.0.0.1:4500\n")),(0,l.yg)("p",null,"\u4e0a\u8ff0\u7aef\u53e3",(0,l.yg)("inlineCode",{parentName:"p"},"brpc_listen_port")," 5000\u662fmeta-service\u7684\u9ed8\u8ba4\u7aef\u53e3\n\u5176\u4e2d ",(0,l.yg)("inlineCode",{parentName:"p"},"fdb_cluster")," \u7684\u503c\u662f FDB \u96c6\u7fa4\u7684\u8fde\u63a5\u4fe1\u606f\uff0c\u627e\u90e8\u7f72 FDB \u7684\u540c\u5b66\u83b7\u53d6\uff0c\u4e00\u822c\u53ef\u4ee5\u5728\u90e8\u7f72fdb\u7684\u673a\u5668\u4e0a /etc/foundationdb/fdb.cluster \u6587\u4ef6\u627e\u5230\u5176\u5185\u5bb9\u3002"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-shell"},"cat /etc/foundationdb/fdb.cluster\n\n## DO NOT EDIT!\n## This file is auto-generated, it is not to be edited by hand\ncloud_ssb:A83c8Y1S3ZbqHLL4P4HHNTTw0A83CuHj@127.0.0.1:4500\n")),(0,l.yg)("h3",{id:"recycler-\u914d\u7f6e"},"Recycler \u914d\u7f6e"),(0,l.yg)("p",null,(0,l.yg)("strong",{parentName:"p"},"Recycler \u9664\u4e86\u7aef\u53e3\u4e4b\u5916\u5176\u4ed6\u9ed8\u8ba4\u914d\u7f6e\u548cmeta-service\u5747\u76f8\u540c, brpc\u7aef\u53e3\u548cmeta-service\u4e0d\u76f8\u540c\u5373\u53ef, \u4e00\u822c\u91c7\u75285100.")),(0,l.yg)("p",null,(0,l.yg)("inlineCode",{parentName:"p"},"./conf")," \u76ee\u5f55\u4e0b\u6709\u4e00\u4e2a\u5168\u90e8\u91c7\u7528\u9ed8\u8ba4\u53c2\u6570\u7684\u914d\u7f6e\u6587\u4ef6 doris_cloud.conf (\u53ea\u9700\u8981\u4e00\u4e2a\u914d\u7f6e\u6587\u4ef6)"),(0,l.yg)("p",null,"\u4e00\u822c\u9700\u8981\u6539\u7684\u662f ",(0,l.yg)("inlineCode",{parentName:"p"},"brpc_listen_port")," \u548c ",(0,l.yg)("inlineCode",{parentName:"p"},"fdb_cluster")," \u8fd9\u4e24\u4e2a\u53c2\u6570"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-shell"},"brpc_listen_port = 5100\nfdb_cluster = xxx:yyy@127.0.0.1:4500\n")),(0,l.yg)("p",null,"\u4e0a\u8ff0\u7aef\u53e3",(0,l.yg)("inlineCode",{parentName:"p"},"brpc_listen_port")," 5000\u662fmeta-service\u7684\u9ed8\u8ba4\u7aef\u53e3\n\u5176\u4e2d ",(0,l.yg)("inlineCode",{parentName:"p"},"fdb_cluster")," \u7684\u503c\u662f FDB \u96c6\u7fa4\u7684\u8fde\u63a5\u4fe1\u606f\uff0c\u627e\u90e8\u7f72 FDB \u7684\u540c\u5b66\u83b7\u53d6\uff0c\u4e00\u822c\u53ef\u4ee5\u5728\u90e8\u7f72fdb\u7684\u673a\u5668\u4e0a /etc/foundationdb/fdb.cluster \u6587\u4ef6\u627e\u5230\u5176\u5185\u5bb9\u3002"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-shell"},"cat /etc/foundationdb/fdb.cluster\n\n## DO NOT EDIT!\n## This file is auto-generated, it is not to be edited by hand\ncloud_ssb:A83c8Y1S3ZbqHLL4P4HHNTTw0A83CuHj@127.0.0.1:4500\n")),(0,l.yg)("h3",{id:"\u6a21\u5757\u542f\u505c"},"\u6a21\u5757\u542f\u505c"),(0,l.yg)("p",null,"Meta-Service \u548c Recycler \u4f9d\u8d56JAVA\u7684\u8fd0\u884c\u73af\u5883, \u6700\u597d\u4f7f\u7528jdk-17\u7684\u7248\u672c.\n\u542f\u52a8\u524dexport JAVA_HOME\u7684\u73af\u5883\u53d8\u91cf."),(0,l.yg)("p",null,"doris_cloud \u5728\u90e8\u7f72\u7684 bin \u76ee\u5f55\u4e0b\u6709\u542f\u505c\u811a\u672c, \u8c03\u7528\u5bf9\u5e94\u7684\u542f\u505c\u811a\u672c\u5373\u53ef\u5b8c\u6210\u542f\u52a8."),(0,l.yg)("h3",{id:"\u542f\u505c-meta_service"},"\u542f\u505c meta_service"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-shell"},"export JAVA_HOME=${path_to_jdk_17}\nbin/start.sh --meta-service --daemonized\n\nbin/stop.sh\n")),(0,l.yg)("h3",{id:"\u542f\u505c-recycler"},"\u542f\u505c Recycler"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-shell"},"export JAVA_HOME=${path_to_jdk_17}\nbin/start.sh --recycler --daemonized\n\nbin/stop.sh\n")),(0,l.yg)("h2",{id:"\u521b\u5efa\u5b58\u7b97\u5206\u79bb\u96c6\u7fa4"},"\u521b\u5efa\u5b58\u7b97\u5206\u79bb\u96c6\u7fa4"),(0,l.yg)("p",null,"\u5b58\u7b97\u5206\u79bb\u67b6\u6784\u4e0b\uff0c\u6574\u4e2a\u6570\u4ed3\u7684\u8282\u70b9\u6784\u6210\u4fe1\u606f\u662f\u901a\u8fc7 Meta-service \u8fdb\u884c\u7ef4\u62a4\u7684 (\u6ce8\u518c + \u53d8\u66f4). FE BE \u548c Meta-service \u4ea4\u4e92\u6765\u8fdb\u884c\u670d\u52a1\u53d1\u73b0\u548c\u8eab\u4efd\u9a8c\u8bc1\u3002"),(0,l.yg)("p",null,"\u521b\u5efa\u5b58\u7b97\u5206\u79bb\u96c6\u7fa4\u4e3b\u8981\u662f\u548c Meta-service \u4ea4\u4e92\uff0c\u901a\u8fc7 HTTP \u63a5\u53e3\uff0c",(0,l.yg)("a",{parentName:"p",href:"/zh-CN/docs/dev/separation-of-storage-and-compute/meta-service-resource-http-api"},"meta-service \u63d0\u4f9b\u4e86\u6807\u51c6\u7684 http \u63a5\u53e3\u8fdb\u884c\u8d44\u6e90\u7ba1\u7406\u64cd\u4f5c"),"."),(0,l.yg)("p",null,"\u521b\u5efa\u5b58\u7b97\u5206\u79bb\u96c6\u7fa4 (\u4ee5\u53ca Cluster) \u7684\u5176\u5b9e\u5c31\u662f\u63cf\u8ff0\u8fd9\u4e2a\u5b58\u7b97\u5206\u79bb\u96c6\u7fa4\u91cc\u7684\u673a\u5668\u7ec4\u6210\uff0c\u4ee5\u4e0b\u6b65\u9aa4\u53ea\u6d89\u521b\u5efa\u4e00\u4e2a\u6700\u57fa\u7840\u7684\u5b58\u7b97\u5206\u79bb\u96c6\u7fa4\u6240\u9700\u8981\u8fdb\u884c\u7684\u4ea4\u4e92\u3002"),(0,l.yg)("p",null,"\u4e3b\u8981\u5206\u4e3a\u4e24\u6b65: 1. \u6ce8\u518c\u4e00\u4e2a\u4ed3\u5e93(FE) 2. \u6ce8\u518c\u4e00\u4e2a\u6216\u8005\u591a\u4e2a\u8ba1\u96c6\u7fa4(BE)"),(0,l.yg)("p",null,"\u6ce8\u610f:"),(0,l.yg)("ol",null,(0,l.yg)("li",{parentName:"ol"},(0,l.yg)("strong",{parentName:"li"},"\u672c\u6587\u540e\u7eed\u7684\u793a\u4f8b\u4e2d127.0.0.1:5000\u6307\u7684\u662fmeta-service\u7684\u5730\u5740, \u5b9e\u9645\u64cd\u4f5c\u65f6\u66ff\u6362\u6210\u771f\u5b9e\u7684meta-serivce \u7684IP \u4ee5\u53cabrpc \u76d1\u542c\u7aef\u53e3")),(0,l.yg)("li",{parentName:"ol"},"\u8bf7\u52ff\u76f4\u63a5\u590d\u5236\u7c98\u8d34")),(0,l.yg)("h3",{id:"\u521b\u5efa\u5b58\u7b97\u5206\u79bb\u96c6\u7fa4fe"},"\u521b\u5efa\u5b58\u7b97\u5206\u79bb\u96c6\u7fa4FE"),(0,l.yg)("h4",{id:"\u5b58\u7b97\u5206\u79bb\u96c6\u7fa4\u53ca\u5176\u5b58\u50a8\u540e\u7aef"},"\u5b58\u7b97\u5206\u79bb\u96c6\u7fa4\u53ca\u5176\u5b58\u50a8\u540e\u7aef"),(0,l.yg)("p",null,"\u8fd9\u4e2a\u6b65\u9aa4\u4e3b\u8981\u76ee\u7684\u662f\u5728meta-service\u6ce8\u518c\u4e00\u4e2a\u5b58\u7b97\u5206\u79bb\u6a21\u5f0f\u7684Doris\u6570\u4ed3(\u4e00\u5957meta-service\u53ef\u4ee5\u652f\u6301\u591a\u4e2a\u4e0d\u540c\u7684Doris\u6570\u4ed3(\u591a\u5957FE-BE)).\n\u4e3b\u8981\u9700\u8981\u63cf\u8ff0\u4e00\u4e2a\u4ed3\u5e93\u4f7f\u7528\u4ec0\u4e48\u6837\u7684\u5b58\u50a8\u540e\u7aef(",(0,l.yg)("a",{parentName:"p",href:"/zh-CN/docs/dev/separation-of-storage-and-compute/storage-vault"},"Storage Vault"),"), \u53ef\u4ee5\u9009\u62e9S3 \u6216\u8005 HDFS. "),(0,l.yg)("p",null,"\u8c03\u7528meta-servicde\u7684create_instance\u63a5\u53e3. \u4e3b\u8981\u53c2\u6570 "),(0,l.yg)("ol",null,(0,l.yg)("li",{parentName:"ol"},"instance_id: \u5b58\u7b97\u5206\u79bb\u6a21\u5f0fDoris\u6570\u4ed3\u7684id, \u6bcf\u6b21\u65b0\u5efa\u90fd\u4f7f\u7528\u4e00\u4e2a\u65b0\u7684, \u8981\u6c42\u5386\u53f2\u552f\u4e00, \u4e00\u822c\u4f7f\u7528uuid, \u4f8b\u59826ADDF03D-4C71-4F43-9D84-5FC89B3514F8. ",(0,l.yg)("strong",{parentName:"li"},"\u672c\u6587\u6863\u4e2d\u4e3a\u4e86\u7b80\u5316\u4f7f\u7528\u666e\u901a\u5b57\u7b26\u4e32"),"."),(0,l.yg)("li",{parentName:"ol"},"name: \u6570\u4ed3\u540d\u5b57, \u6309\u9700\u586b\u5199"),(0,l.yg)("li",{parentName:"ol"},"user_id: \u7528\u6237id, \u662f\u4e00\u4e2a\u5b57\u7b26\u4e32, \u6309\u9700\u586b\u5199"),(0,l.yg)("li",{parentName:"ol"},"vault: HDFS\u6216\u8005S3\u7684\u5b58\u50a8\u540e\u7aef\u7684\u4fe1\u606f, \u6bd4\u5982HDFS\u7684\u5c5e\u6027, s3 bucket\u4fe1\u606f\u7b49.")),(0,l.yg)("p",null,"\u66f4\u591a\u4fe1\u606f\u8bf7\u53c2\u8003",(0,l.yg)("a",{parentName:"p",href:"/zh-CN/docs/dev/separation-of-storage-and-compute/meta-service-resource-http-api"},"meta-service API create instance\u7ae0\u8282"),"."),(0,l.yg)("h5",{id:"\u521b\u5efa\u57fa\u4e8ehdfs\u7684\u5b58\u7b97\u5206\u79bbdoris"},"\u521b\u5efa\u57fa\u4e8eHDFS\u7684\u5b58\u7b97\u5206\u79bbDoris"),(0,l.yg)("p",null,"\u521b\u5efa\u57fa\u4e8eHDFS\u7684\u5b58\u7b97\u5206\u79bbDoris, \u9700\u8981\u63cf\u8ff0\u6b63\u786e\u6240\u6709\u4fe1\u606f\u4ee5\u53ca\u4fdd\u8bc1\u6240\u6709\u7684\u8282\u70b9(FE BE MS RE)\n\u90fd\u80fd\u591f\u6709\u6743\u9650\u8bbf\u95ee\u6240\u58f0\u660e\u7684HDFS, \u4f8b\u5982\u63d0\u524d\u7ed9\u673a\u5668\u505a\u597dkerbros\u6388\u6743\u914d\u7f6e\u7b49, \u5e76\u505a\u597d\u8fde\u901a\u6027\n\u68c0\u67e5(\u53ef\u4ee5\u5728\u5bf9\u5e94\u7684\u6bcf\u4e2a\u8282\u70b9\u4e0a\u4f7f\u7528hadoop client\u8fdb\u884c\u6d4b\u8bd5)."),(0,l.yg)("p",null,"prefix \u5b57\u6bb5\u6309\u9700\u586b\u5199, \u4e00\u822c\u4ee5\u6570\u4ed3\u7684\u670d\u52a1\u4e1a\u52a1\u6765\u547d\u540d."),(0,l.yg)("p",null,"\u793a\u4f8b"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Shell"},'curl -s "127.0.0.1:5000/MetaService/http/create_instance?token=greedisgood9999" -d \\\n\'{\n  "instance_id": "sample_instance_id",\n  "name": "sample_instance_name",\n  "user_id": "sample_user_id",\n  "vault": {\n    "hdfs_info" : {\n      "build_conf": {\n        "fs_name": "hdfs://172.21.0.44:4007",\n        "user": "hadoop",\n        "hdfs_kerberos_keytab": "/etc/emr.keytab",\n        "hdfs_kerberos_principal": "hadoop/172.30.0.178@EMR-XXXYYY",\n        "hdfs_confs" : [\n          {\n            "key": "hadoop.security.authentication",\n            "value": "kerberos"\n          }\n        ]\n      },\n      "prefix": "sample_prefix"\n    }\n  }\n}\'\n')),(0,l.yg)("h5",{id:"\u521b\u5efa\u57fa\u4e8es3\u7684\u5b58\u7b97\u5206\u79bbdoris"},"\u521b\u5efa\u57fa\u4e8eS3\u7684\u5b58\u7b97\u5206\u79bbDoris"),(0,l.yg)("p",null,"\u57fa\u4e8e\u5bf9\u8c61\u5b58\u50a8\u7684\u6240\u6709\u5c5e\u6027\u5747\u4e3a\u5fc5\u586b, \u5176\u4e2d"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"\u4f7f\u7528minio\u7b49\u652f\u6301S3\u534f\u8bae\u7684\u5bf9\u8c61\u5b58\u50a8\u65f6, \u9700\u8981\u81ea\u884c\u6d4b\u8bd5\u8fde\u901a\u6027\u4ee5\u53caaksk\u7684\u6b63\u786e\u6027.\n\u5177\u4f53\u505a\u6cd5\u53ef\u4ee5\u53c2\u8003 ",(0,l.yg)("a",{parentName:"li",href:"https://min.io/docs/minio/linux/integrations/aws-cli-with-minio.html"},"\u4f7f\u7528aws cli \u9a8c\u8bc1minio\u662f\u5426\u5de5\u4f5c"),"\n\u8fd9\u4e2a\u6559\u7a0b\u8fdb\u884c\u68c0\u67e5"),(0,l.yg)("li",{parentName:"ul"},"bucket\u5b57\u6bb5\u7684\u503c\u5c31\u662f\u4e00\u4e2abucket\u7684\u540d\u5b57, \u662f\u4e0d\u5e26scheme(\u4f8b\u5982s3://)\u7684."),(0,l.yg)("li",{parentName:"ul"},"external_endpoint\u4fdd\u6301\u548cendpoint\u503c\u76f8\u540c\u5373\u53ef."),(0,l.yg)("li",{parentName:"ul"},"\u5982\u679c\u4e0d\u662f\u4e91\u5382\u5546\u63d0\u4f9b\u7684\u5bf9\u8c61\u5b58\u50a8, region \u548c provider \u7684\u503c\u53ef\u4ee5\u4efb\u610f\u586b\u5199")),(0,l.yg)("p",null,"\u793a\u4f8b(\u817e\u8baf\u4e91\u7684cos)"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Shell"},'curl -s "127.0.0.1:5000/MetaService/http/create_instance?token=greedisgood9999" -d \\\n\'{\n  "instance_id": "sample_instance_id",\n  "name": "sample_instance_name",\n  "user_id": "sample_user_id",\n  "vault": {\n    "obj_info": {\n      "ak": "ak_xxxxxxxxxxx",\n      "sk": "sk_xxxxxxxxxxx",\n      "bucket": "sample_bucket_name",\n      "prefix": "sample_prefix",\n      "endpoint": "cos.ap-beijing.myqcloud.com",\n      "external_endpoint": "cos.ap-beijing.myqcloud.com",\n      "region": "ap-beijing",\n      "provider": "COS"\n    }\n  }\n}\'\n')),(0,l.yg)("h5",{id:"\u67e5\u770b\u5b58\u50a8\u540e\u7aef"},"\u67e5\u770b\u5b58\u50a8\u540e\u7aef"),(0,l.yg)("p",null,"\u6267\u884c\u5b8c\u540e\u7eed\u6b65\u9aa4, \u542f\u52a8FE\u6210\u529f\u540e, \u53ef\u4ee5\u5728FE\u8f93\u5165SQL show storage vault\n\u53ef\u4ee5\u770b\u5230built_in_storage_vault, \u5e76\u4e14\u8fd9\u4e2avault\u7684\u5c5e\u6027\u4e0a\u8ff0\u7684\u5c5e\u6027\u503c\u76f8\u540c."),(0,l.yg)("p",null,"\u4ee5\u4e0b\u4e3ahdfs\u7684\u4e00\u4e2a\u793a\u4f8b"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Shell"},'mysql> show storage vault;\n+------------------------+----------------+-------------------------------------------------------------------------------------------------+-----------+\n| StorageVaultName       | StorageVaultId | Propeties                                                                                       | IsDefault |\n+------------------------+----------------+-------------------------------------------------------------------------------------------------+-----------+\n| built_in_storage_vault | 1              | build_conf { fs_name: "hdfs://127.0.0.1:8020" } prefix: "sample_prefix_1CF80628-16CF-0A46-5EE2" | false     |\n+------------------------+----------------+-------------------------------------------------------------------------------------------------+-----------+\n2 rows in set (0.00 sec)\n')),(0,l.yg)("h4",{id:"\u6dfb\u52a0fe"},"\u6dfb\u52a0FE"),(0,l.yg)("p",null,"\u5b58\u7b97\u5206\u79bb\u6a21\u5f0fFE\u7684\u7ba1\u7406\u65b9\u5f0f\u548cBE \u662f\u7c7b\u4f3c\u7684\u90fd\u662f\u5206\u4e86\u7ec4, \u6240\u4ee5\u4e5f\u662f\u901a\u8fc7add_cluster\u7b49\u63a5\u53e3\u6765\u8fdb\u884c\u64cd\u4f5c."),(0,l.yg)("p",null,"\u4e00\u822c\u6765\u8bf4\u53ea\u9700\u8981\u5efa\u4e00\u4e2aFE\u5373\u53ef, \u5982\u679c\u9700\u8981\u591a\u52a0\u51e0\u4e2aFE, "),(0,l.yg)("p",null,"cloud_unique_id\u662f\u4e00\u4e2a\u552f\u4e00\u5b57\u7b26\u4e32, \u683c\u5f0f\u4e3a ",(0,l.yg)("inlineCode",{parentName:"p"},"1:<instance_id>:<string>"),', \u6839\u636e\u81ea\u5df1\u559c\u597d\u9009\u4e00\u4e2a.\nip edit_log_port \u6309\u7167fe.conf\u91cc\u5b9e\u9645\u586b\u5199.\n\u6ce8\u610f, FE\u96c6\u7fa4\u7684cluster_name cluster_id\u662f\u56fa\u5b9a, \u6052\u5b9a\u4e3a\n"cluster_name":"RESERVED_CLUSTER_NAME_FOR_SQL_SERVER"\n"cluster_id":"RESERVED_CLUSTER_ID_FOR_SQL_SERVER"'),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Shell"},'# \u6dfb\u52a0FE\ncurl \'127.0.0.1:5000/MetaService/http/add_cluster?token=greedisgood9999\' -d \'{\n    "instance_id":"sample_instance_id",\n    "cluster":{\n        "type":"SQL",\n        "cluster_name":"RESERVED_CLUSTER_NAME_FOR_SQL_SERVER",\n        "cluster_id":"RESERVED_CLUSTER_ID_FOR_SQL_SERVER",\n        "nodes":[\n            {\n                "cloud_unique_id":"1:sample_instance_id:cloud_unique_id_sql_server00",\n                "ip":"172.21.16.21",\n                "edit_log_port":12103,\n                "node_type":"FE_MASTER"\n            }\n        ]\n    }\n}\'\n\n# \u521b\u5efa\u6210\u529f get \u51fa\u6765\u786e\u8ba4\u4e00\u4e0b\ncurl \'127.0.0.1:5000/MetaService/http/get_cluster?token=greedisgood9999\' -d \'{\n    "instance_id":"sample_instance_id",\n    "cloud_unique_id":"1:sample_instance_id:cloud_unique_id_sql_server00",\n    "cluster_name":"RESERVED_CLUSTER_NAME_FOR_SQL_SERVER",\n    "cluster_id":"RESERVED_CLUSTER_ID_FOR_SQL_SERVER"\n}\'\n')),(0,l.yg)("h3",{id:"\u521b\u5efa\u8ba1\u7b97\u96c6\u7fa4compute-cluster----be"},(0,l.yg)("a",{parentName:"h3",href:"id:create_compute_cluster"},"\u521b\u5efa\u8ba1\u7b97\u96c6\u7fa4(Compute Cluster -- BE)")),(0,l.yg)("p",null,"\u7528\u6237\u53ef\u4ee5\u521b\u5efa\u4e00\u4e2a\u6216\u8005\u591a\u4e2a\u8ba1\u7b97\u96c6\u7fa4, \u4e00\u4e2a\u8ba1\u7b97\u673a\u7fa4\u7531\u4efb\u610f\u591a\u4e2a\u8ba1\u7b97\u9636\u6bb5\u7ec4\u6210."),(0,l.yg)("p",null,"\u4e00\u4e2a\u8ba1\u7b97\u96c6\u7fa4\u7ec4\u6210\u6709\u591a\u4e2a\u51e0\u4e2a\u5173\u952e\u4fe1\u606f:"),(0,l.yg)("ol",null,(0,l.yg)("li",{parentName:"ol"},"cloud_unique_id\u662f\u4e00\u4e2a\u552f\u4e00\u5b57\u7b26\u4e32, \u683c\u5f0f\u4e3a ",(0,l.yg)("inlineCode",{parentName:"li"},"1:<instance_id>:<string>"),", \u6839\u636e\u81ea\u5df1\u559c\u597d\u9009\u4e00\u4e2a. \u8fd9\u4e2a\u503c\u9700\u8981\u548cbe.conf\u7684cloud_unique_id\u914d\u7f6e\u503c\u76f8\u540c."),(0,l.yg)("li",{parentName:"ol"},"cluster_name cluster_id \u6309\u7167\u81ea\u5df1\u7684\u5b9e\u9645\u60c5\u51b5\u504f\u597d\u586b\u5199"),(0,l.yg)("li",{parentName:"ol"},"ip\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u586b\u5199, heartbeat_port \u662fBE\u7684\u5fc3\u8df3\u7aef\u53e3.")),(0,l.yg)("p",null,"BE cluster\u7684\u6570\u91cf\u4ee5\u53ca \u8282\u70b9\u6570\u91cf \u6839\u636e\u81ea\u5df1\u9700\u6c42\u8c03\u6574, \u4e0d\u56fa\u5b9a, \u4e0d\u540ccluster\u9700\u8981\u4f7f\u7528\u4e0d\u540c\u7684 cluster_name \u548c cluster_id."),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Shell"},'# 172.19.0.11\n# \u6dfb\u52a0BE\ncurl \'127.0.0.1:5000/MetaService/http/add_cluster?token=greedisgood9999\' -d \'{\n    "instance_id":"sample_instance_id",\n    "cluster":{\n        "type":"COMPUTE",\n        "cluster_name":"cluster_name0",\n        "cluster_id":"cluster_id0",\n        "nodes":[\n            {\n                "cloud_unique_id":"1:sample_instance_id:cloud_unique_id_compute_node0",\n                "ip":"172.21.16.21",\n                "heartbeat_port":9455\n            }\n        ]\n    }\n}\'\n\n# \u521b\u5efa\u6210\u529f get \u51fa\u6765\u786e\u8ba4\u4e00\u4e0b\ncurl \'127.0.0.1:5000/MetaService/http/get_cluster?token=greedisgood9999\' -d \'{\n    "instance_id":"sample_instance_id",\n    "cloud_unique_id":"1:sample_instance_id:cloud_unique_id_compute_node0",\n    "cluster_name":"cluster_name0",\n    "cluster_id":"cluster_id0"\n}\'\n')),(0,l.yg)("h3",{id:"febe\u914d\u7f6e"},"FE/BE\u914d\u7f6e"),(0,l.yg)("p",null,"FE BE \u914d\u7f6e\u76f8\u6bd4doris\u591a\u4e86\u4e00\u4e9b\u914d\u7f6e, \u5176\u4e2d\u6bd4\u8f83\u5173\u952e\u7684\u662f"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"meta_service_endpoint, \u8fd9\u4e2a\u914d\u7f6e\u662fmeta service\u7684\u5730\u5740, FE BE\u90fd\u8981\u586b\u5199"),(0,l.yg)("li",{parentName:"ul"},"cloud_unique_id, \u6839\u636e\u4e4b\u524d\u521b\u5efa\u5b58\u7b97\u5206\u79bb\u96c6\u7fa4\u7684\u65f6\u5019\u53d1\u5f80meta-service\u8bf7\u6c42\u91cc\u7684\u5b9e\u9645\u503c\u586b\u5199\u5373\u53ef, Doris\u662f\u901a\u8fc7\u8fd9\u4e2a\u914d\u7f6e\u662f\u5426\u6709\u503c\u6765\u51b3\u5b9a\u662f\u5426\u5de5\u4f5c\u5728\u5b58\u7b97\u5206\u79bb\u6a21\u5f0f")),(0,l.yg)("h4",{id:"feconf"},"fe.conf"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Shell"},"meta_service_endpoint = 127.0.0.1:5000\ncloud_unique_id = 1:sample_instance_id:cloud_unique_id_sql_server00\n")),(0,l.yg)("h4",{id:"beconf"},"be.conf"),(0,l.yg)("p",null,"\u4e0b\u8ff0\u4f8b\u5b50\u4e2d meta_service_use_load_balancer \u548c enable_file_cache \u53ef\u4ee5\u7167\u6284,\n\u5176\u4ed6\u7684\u914d\u7f6e\u6309\u7167\u5b9e\u9645\u503c\u586b\u5199."),(0,l.yg)("p",null,"file_cache_path \u662f\u4e00\u4e2ajson\u6570\u7ec4(\u6839\u636e\u5b9e\u9645cache\u76d8\u7684\u4e2a\u6570\u914d\u7f6e), \u5b83\u7684\u5404\u4e2a\u5b57\u6bb5\u542b\u4e49"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"path, \u7f13\u5b58\u6570\u636e\u5b58\u653e\u7684\u8def\u5f84, \u7c7b\u4f3c\u4e8e\u5b58\u7b97\u4e00\u4f53\u7684storage_root_path"),(0,l.yg)("li",{parentName:"ul"},"total_size, \u671f\u671b\u4f7f\u7528\u7684\u7f13\u5b58\u7a7a\u95f4\u4e0a\u9650"),(0,l.yg)("li",{parentName:"ul"},"query_limit, \u5355\u4e2aquery\u5728cache miss\u65f6\u6700\u591a\u80fd\u6dd8\u6c70\u7684\u7f13\u5b58\u6570\u636e\u91cf (\u4e3a\u4e86\u9632\u6b62\u5927\u67e5\u8be2\u628a\u7f13\u5b58\u5168\u90e8\u51b2\u6389)\ncache\u4e2d\u5b58\u653e\u7684\u662f\u6570\u636e, \u6240\u4ee5\u6700\u597d\u4f7f\u7528SSD\u7b49\u9ad8\u6027\u80fd\u7684\u78c1\u76d8\u4f5c\u4e3a\u7f13\u5b58\u5b58\u50a8.")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Shell"},'meta_service_endpoint = 127.0.0.1:5000\ncloud_unique_id = 1:sample_instance_id:cloud_unique_id_compute_node0\nmeta_service_use_load_balancer = false\nenable_file_cache = true\nfile_cache_path = [{"path":"/mnt/disk1/doris_cloud/file_cache","total_size":104857600000,"query_limit":10485760000}, {"path":"/mnt/disk2/doris_cloud/file_cache","total_size":104857600000,"query_limit":10485760000}]\n')),(0,l.yg)("h3",{id:"\u542f\u505cfebe"},"\u542f\u505cFE/BE"),(0,l.yg)("p",null,"FE BE\u542f\u505c\u548cdoris\u5b58\u7b97\u4e00\u4f53\u542f\u505c\u65b9\u5f0f\u4fdd\u6301\u4e00\u81f4, "),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-Shell"},"bin/start_be.sh --daemon\nbin/stop_be.sh\n\n\nbin/start_fe.sh --daemon\nbin/stop_fe.sh\n")),(0,l.yg)("p",null,"Doris ",(0,l.yg)("strong",{parentName:"p"},"cloud\u6a21\u5f0f**"),"FE*",(0,l.yg)("strong",{parentName:"p"},"*\u4f1a\u81ea\u52a8\u53d1\u73b0\u5bf9\u5e94\u7684BE, \u4e0d\u9700\u901a\u8fc7 alter system add \u6216\u8005drop backend \u64cd\u4f5c\u8282\u70b9.")),(0,l.yg)("p",null,"\u542f\u52a8\u540e\u89c2\u5bdf\u65e5\u5fd7, \u5982\u679c\u4e0a\u8ff0\u7f13\u89e3\u914d\u7f6e\u90fd\u662f\u6b63\u786e\u7684, \u5219\u8fdb\u5165\u6b63\u5e38\u5de5\u4f5c\u6a21\u5f0f, \u53ef\u4ee5\u901a\u8fc7MySQL\u5ba2\u6237\u7aef\u8fde\u4e0aFE\u8fdb\u884c\u8bbf\u95ee."),(0,l.yg)("h3",{id:"\u8ba1\u7b97\u96c6\u7fa4\u64cd\u4f5c"},"\u8ba1\u7b97\u96c6\u7fa4\u64cd\u4f5c"),(0,l.yg)("h4",{id:"\u52a0\u51cffebe\u8282\u70b9"},"\u52a0\u51cfFE/BE\u8282\u70b9"),(0,l.yg)("p",null,"\u52a0\u51cf\u8282\u70b9\u7684\u64cd\u4f5c\u548c\u4e0a\u8ff0\u65b0\u5efa\u5b58\u7b97\u5206\u79bbDoris\u65f6\u521b\u5efa\u8ba1\u7b97\u96c6\u7fa4\u7684\u6b65\u9aa4\u7c7b\u4f3c, \u5411meta-service \u58f0\n\u660e\u9700\u8981\u589e\u52a0\u54ea\u4e9b\u8282\u70b9, \u7136\u540e\u542f\u52a8\u5bf9\u5e94\u7684\u8282\u70b9\u5373\u53ef(\u65b0\u589e\u8282\u70b9\u7684\u8981\u914d\u7f6e\u6b63\u786e),\n",(0,l.yg)("strong",{parentName:"p"},"\u4e0d\u9700\u8981\u4f7f\u7528alter system add/drop\u8bed\u53e5\u8fdb\u884c\u989d\u5916\u64cd\u4f5c"),"."),(0,l.yg)("p",null,"\u5b58\u7b97\u5206\u79bb\u6a21\u5f0f\u53ef\u4ee5\u540c\u65f6\u589e\u52a0/\u51cf\u5c11\u82e5\u5e72\u4e2a\u8282\u70b9, \u4f46\u662f\u5efa\u8bae\u5b9e\u9645\u64cd\u4f5c\u65f6\u6bcf\u6b21\u53ea\u64cd\u4f5c\u64cd\u4f5c\u4e00\u4e2a\u8282\u70b9."),(0,l.yg)("p",null,"\u793a\u4f8b, \u7ed9\u8ba1\u7b97\u96c6\u7fa4cluster_name0\u589e\u52a0\u4e24\u4e2aBE\u8282\u70b9"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre"},'curl \'127.0.0.1:5000/MetaService/http/add_node?token=greedisgood9999\' -d \'{\n    "instance_id":"sample_instance_id",\n    "cluster":{\n        "type":"COMPUTE",\n        "cluster_name":"cluster_name0",\n        "cluster_id":"cluster_id0",\n        "nodes":[\n            {\n                "cloud_unique_id":"1:sample_instance_id:cloud_unique_id_compute_node1",\n                "ip":"172.21.16.22",\n                "heartbeat_port":9455\n            },\n            {\n                "cloud_unique_id":"1:sample_instance_id:cloud_unique_id_compute_node2",\n                "ip":"172.21.16.23",\n                "heartbeat_port":9455\n            }\n        ]\n    }\n}\'\n')),(0,l.yg)("p",null,"\u793a\u4f8b, \u7ed9\u8ba1\u7b97\u96c6\u7fa4cluster_name0\u51cf\u5c11\u4e24\u4e2aBE\u8282\u70b9"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre"},'curl \'127.0.0.1:5000/MetaService/http/drop_node?token=greedisgood9999\' -d \'{\n    "instance_id":"sample_instance_id",\n    "cluster":{\n        "type":"COMPUTE",\n        "cluster_name":"cluster_name0",\n        "cluster_id":"cluster_id0",\n        "nodes":[\n            {\n                "cloud_unique_id":"1:sample_instance_id:cloud_unique_id_compute_node1",\n                "ip":"172.21.16.22",\n                "heartbeat_port":9455\n            },\n            {\n                "cloud_unique_id":"1:sample_instance_id:cloud_unique_id_compute_node2",\n                "ip":"172.21.16.23",\n                "heartbeat_port":9455\n            }\n        ]\n    }\n}\'\n')),(0,l.yg)("p",null,"\u793a\u4f8b, \u6dfb\u52a0\u4e00\u4e2aFE follower, \u4ee5\u4e0bnode_type\u4e3aFE_MASTER\u8868\u793a\u8fd9\u4e2a\u8282\u70b9\u53ef\u4ee5\u9009\u4e3amaster,\n",(0,l.yg)("strong",{parentName:"p"},"\u5982\u679c\u9700\u8981\u589e\u52a0\u4e00\u4e2aOBSERVER, \u5c06node_type \u8bbe\u7f6e\u4e3aOBSERVER\u5373\u53ef.")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre"},'curl \'127.0.0.1:5000/MetaService/http/add_node?token=greedisgood9999\' -d \'{\n    "instance_id":"sample_instance_id",\n    "cluster":{\n        "type":"SQL",\n        "cluster_name":"RESERVED_CLUSTER_NAME_FOR_SQL_SERVER",\n        "cluster_id":"RESERVED_CLUSTER_ID_FOR_SQL_SERVER",\n        "nodes":[\n            {\n                "cloud_unique_id":"1:sample_instance_id:cloud_unique_id_sql_server00",\n                "ip":"172.21.16.22",\n                "edit_log_port":12103,\n                "node_type":"FE_MASTER"\n            }\n        ]\n    }\n}\'\n')),(0,l.yg)("p",null,"\u793a\u4f8b, \u5220\u9664\u4e00\u4e2aFE\u8282\u70b9"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre"},'curl \'127.0.0.1:5000/MetaService/http/drop_node?token=greedisgood9999\' -d \'{\n    "instance_id":"sample_instance_id",\n    "cluster":{\n        "type":"SQL",\n        "cluster_name":"RESERVED_CLUSTER_NAME_FOR_SQL_SERVER",\n        "cluster_id":"RESERVED_CLUSTER_ID_FOR_SQL_SERVER",\n        "nodes":[\n            {\n                "cloud_unique_id":"1:sample_instance_id:cloud_unique_id_sql_server00",\n                "ip":"172.21.16.22",\n                "edit_log_port":12103,\n                "node_type":"FE_MASTER"\n            }\n        ]\n    }\n}\'\n')),(0,l.yg)("h4",{id:"\u52a0\u51cf\u8ba1\u7b97\u96c6\u7fa4compute-cluster"},"\u52a0\u51cf\u8ba1\u7b97\u96c6\u7fa4(Compute Cluster)"),(0,l.yg)("p",null,"\u65b0\u589e\u4e00\u4e2a\u8ba1\u7b97\u96c6\u7fa4\u53c2\u8003\u524d\u6587",(0,l.yg)("a",{parentName:"p",href:"#create_compute_cluster"},"\u521b\u5efa\u8ba1\u7b97\u96c6\u7fa4\u7ae0\u8282"),"\u5373\u53ef."),(0,l.yg)("p",null,"\u5220\u9664\u4e00\u4e2a\u8ba1\u7b97\u96c6\u7fa4\u8c03\u7528meta-service \u63a5\u53e3\u4e4b\u540e \u5173\u505c\u54cd\u5e94\u8282\u70b9\u5373\u53ef."),(0,l.yg)("p",null,"\u793a\u4f8b, \u5220\u9664\u540d\u4e3acluster_name0\u7684\u8ba1\u7b97\u96c6\u7fa4(\u4ee5\u4e0b\u6240\u6709\u53c2\u6570\u90fd\u5fc5\u987b\u586b)"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre"},'curl \'127.0.0.1:5000/MetaService/http/add_cluster?token=greedisgood9999\' -d \'{\n    "instance_id":"sample_instance_id",\n    "cluster":{\n        "type":"COMPUTE",\n        "cluster_name":"cluster_name0",\n        "cluster_id":"cluster_id0"\n     }\n}\'\n')),(0,l.yg)("h2",{id:"\u6e05\u7406\u96c6\u7fa4\u6b63\u5f0f\u73af\u5883\u8bf7\u52ff\u4f7f\u7528"},"\u6e05\u7406\u96c6\u7fa4(",(0,l.yg)("strong",{parentName:"h2"},"\u6b63\u5f0f\u73af\u5883\u8bf7\u52ff\u4f7f\u7528"),")"),(0,l.yg)("p",null,"\u6709\u65f6\u5019\u6211\u4eec\u9700\u8981\u521b\u5efa\u4e00\u4e9b\u6d4b\u8bd5\u7528\u7684\u5b58\u7b97\u5206\u79bbDoris, \u5176\u4e2d\u6709\u4e00\u4e9b\u6b65\u9aa4\u5f04\u9519\u4e86, \u6216\u8005\u60f3\u5b8c\u5168\u91cd\n\u65b0\u642d\u5efa. \u5219\u9700\u8981\u6e05\u9664\u73af\u5883, \u91cd\u65b0\u6267\u884c\u4e0a\u8ff0\u521b\u5efa\u5b58\u7b97\u5206\u79bb\u7684Doris\u7684\u6b65\u9aa4.\n\u548c\u5b58\u7b97\u4e00\u4f53\u7684Doris \u624b\u52a8\u6e05\u9664\u96c6\u7fa4\u65b9\u5f0f\u7c7b\u4f3c\u4e3b\u8981\u5206\u4e3a\u4e24\u6b65: \u6e05\u9664\u5143\u6570\u636e\u4ee5\u53ca\u6e05\u9664\u6570\u636e"),(0,l.yg)("ol",null,(0,l.yg)("li",{parentName:"ol"},"\u624b\u52a8\u5f3a\u5236\u6e05\u9664\u5143\u6570\u636e: \u5220\u6389FE\u7684meta\u76ee\u5f55\u4ee5\u53cafdb\u91cc\u7684\u5143\u6570\u636e, \u5220\u9664fdb\u91cc\u7684\u6570\u636e\u9700\u8981\u4f7f\n\u7528\u5230fdb\u7684\u547d\u4ee4\u884c\u5de5\u5177fdbcli. \u4ee5\u4e0b\u547d\u4ee4\u90fd\u8981\u6267\u884c, \u5176\u4e2d",(0,l.yg)("inlineCode",{parentName:"li"},"${instance_id}"),"\u9700\u8981\u66ff\u6210\u5b9e\u9645\n\u7684\u503c",(0,l.yg)("pre",{parentName:"li"},(0,l.yg)("code",{parentName:"pre"},'fdbcli --exec "writemode on;clearrange \\x01\\x10instance\\x00\\x01\\x10${instance_id}\\x00\\x01 \\x01\\x10instance\\x00\\x01\\x10${instance_id}\\x00\\xff\\x00\\x01"\nfdbcli --exec "writemode on;clearrange \\x01\\x10meta\\x00\\x01\\x10${instance_id}\\x00\\x01 \\x01\\x10meta\\x00\\x01\\x10${instance_id}\\x00\\xff\\x00\\x01"\nfdbcli --exec "writemode on;clearrange \\x01\\x10txn\\x00\\x01\\x10${instance_id}\\x00\\x01 \\x01\\x10txn\\x00\\x01\\x10${instance_id}\\x00\\xff\\x00\\x01"\nfdbcli --exec "writemode on;clearrange \\x01\\x10version\\x00\\x01\\x10${instance_id}\\x00\\x01 \\x01\\x10version\\x00\\x01\\x10${instance_id}\\x00\\xff\\x00\\x01"\nfdbcli --exec "writemode on;clearrange \\x01\\x10stats\\x00\\x01\\x10${instance_id}\\x00\\x01 \\x01\\x10stats\\x00\\x01\\x10${instance_id}\\x00\\xff\\x00\\x01"\nfdbcli --exec "writemode on;clearrange \\x01\\x10recycle\\x00\\x01\\x10${instance_id}\\x00\\x01 \\x01\\x10recycle\\x00\\x01\\x10${instance_id}\\x00\\xff\\x00\\x01"\nfdbcli --exec "writemode on;clearrange \\x01\\x10job\\x00\\x01\\x10${instance_id}\\x00\\x01 \\x01\\x10job\\x00\\x01\\x10${instance_id}\\x00\\xff\\x00\\x01"\nfdbcli --exec "writemode on;clearrange \\x01\\x10copy\\x00\\x01\\x10${instance_id}\\x00\\x01 \\x01\\x10copy\\x00\\x01\\x10${instance_id}\\x00\\xff\\x00\\x01"\nfdbcli --exec "writemode on;clearrange \\x01\\x10storage_vault\\x00\\x01\\x10${instance_id}\\x00\\x01 \\x01\\x10storage_vault\\x00\\x01\\x10${instance_id}\\x00\\xff\\x00\\x01"\n'))),(0,l.yg)("li",{parentName:"ol"},"\u624b\u52a8\u5f3a\u5236\u5220\u9664BE\u7684\u7f13\u5b58\u76ee\u5f55(\u4e3b\u8981\u662ffile_cache_path\u8fd9\u4e2a\u914d\u7f6e\u5bf9\u5e94\u7684\u51e0\u4e2a\u76ee\u5f55)"),(0,l.yg)("li",{parentName:"ol"},"\u91cd\u542fmeta-service \u4ee5\u53ca recycler")),(0,l.yg)("h2",{id:"\u5e38\u89c1\u95ee\u9898"},"\u5e38\u89c1\u95ee\u9898"))}p.isMDXComponent=!0}}]);